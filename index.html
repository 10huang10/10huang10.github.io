<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>登入頁</title>
  <link rel="stylesheet" href="css/style.css" />
  <script src="common.js"></script>
</head>
<body>
    <h2>登入log in</h2>
    <input id="user" placeholder="帳號pass"><input id="pass" placeholder="密碼password" type="password">
    <button onclick="login()">登入</button>
    <hr>
    <h3>註冊帳號Register an account</h3>
    <input id="newUser" placeholder="新帳號newPass"><input id="newPass" placeholder="新密碼new password" type="password">
    <button onclick="register()">註冊</button>
    <script>
      
      function login() {
        const u = user.value, p = pass.value;
        const users = JSON.parse(localStorage.getItem("users") || "{}");
        if (users[u] && users[u].password === p) {
          localStorage.setItem("loggedInUser", u);
          location.href = "dashboard.html";
        } else alert("登入失敗");
      }
      function register() {
        const u = newUser.value, p = newPass.value;
        let users = JSON.parse(localStorage.getItem("users") || "{}");
        if (users[u]) return alert("帳號已存在");
        users[u] = { password: p };
        localStorage.setItem("users", JSON.stringify(users));
        alert("註冊成功");
      }
  </script>
</body>
</html>
